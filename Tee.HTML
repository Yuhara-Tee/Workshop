import React, { useState, useEffect, useRef } from 'react';
import { Send, Bot, User, Cpu, WifiOff, Wifi, Database, Info, RefreshCw } from 'lucide-react';

const App = () => {
  const [messages, setMessages] = useState([
    {
      role: 'assistant',
      content: '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå! ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠‡∏ö‡∏≠‡∏ó PLC (‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå) \n\n‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏£‡∏∞‡∏ö‡∏ö AI ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏ú‡∏°‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ù‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö ‡∏•‡∏≠‡∏á‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á:\n- LD / LDP / LDF\n- SET / RST\n- Timer (TON / TOF)\n- Counter\n- MOV / CMP\n\n‡∏û‡∏¥‡∏°‡∏û‡πå‡∏°‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö!'
    }
  ]);
  const [input, setInput] = useState('');
  const [isTyping, setIsTyping] = useState(false);
  const messagesEndRef = useRef(null);

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  };

  useEffect(() => {
    scrollToBottom();
  }, [messages, isTyping]);

  // ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ù‡∏±‡∏á‡πÉ‡∏ô‡∏ï‡∏±‡∏ß (Embedded Knowledge Base)
  const knowledgeBase = [
    {
      keywords: ['ld', 'load', '‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏õ‡∏Å‡∏ï‡∏¥‡πÄ‡∏õ‡∏¥‡∏î', 'no contact'],
      response: `üìå **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á LD (Load)**
‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏á‡∏à‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏õ‡∏Å‡∏ï‡∏¥‡πÄ‡∏õ‡∏¥‡∏î (Normally Open - NO)
‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏Å‡∏î ‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÑ‡∏ü‡∏à‡∏∞‡πÑ‡∏´‡∏•‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏°‡∏≤‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô

**‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö Ladder:**
|---[ ]---|

**‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
‡πÉ‡∏ä‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏° rung ‡πÉ‡∏´‡∏°‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πà‡∏≠‡∏≠‡∏ô‡∏∏‡∏Å‡∏£‡∏°‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏≠‡∏∑‡πà‡∏ô`
    },
    {
      keywords: ['ldi', 'ld not', 'nc', '‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏õ‡∏Å‡∏ï‡∏¥‡∏õ‡∏¥‡∏î'],
      response: `üìå **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á LDI / LD NOT (Load Inverse)**
‡∏Ñ‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏õ‡∏Å‡∏ï‡∏¥‡∏õ‡∏¥‡∏î (Normally Closed - NC)
‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÑ‡∏ü‡∏à‡∏∞‡πÑ‡∏´‡∏•‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏°‡∏≤‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î (‡∏ï‡∏±‡∏î‡∏ß‡∏á‡∏à‡∏£)

**‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö Ladder:**
|---[/]---|

**‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏° Stop ‡∏´‡∏£‡∏∑‡∏≠ Interlock ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô`
    },
    {
      keywords: ['out', 'coil', 'output', '‡∏Ñ‡∏≠‡∏¢‡∏•‡πå'],
      response: `üìå **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á OUT (Output Coil)**
‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏±‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏≠‡∏≤‡∏ï‡πå‡∏û‡∏∏‡∏ï (‡πÄ‡∏ä‡πà‡∏ô Y, Q) ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏µ‡πÄ‡∏•‡∏¢‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (M) ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á Coil ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (ON)

**‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö Ladder:**
|---( )---|

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:**
‡∏´‡∏≤‡∏Å‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏î‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô Coil ‡∏Å‡πá‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞)`
    },
    {
      keywords: ['set', 'rst', 'reset', '‡∏à‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞'],
      response: `üìå **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á SET ‡πÅ‡∏•‡∏∞ RST (Reset)**
‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏ö‡∏ö‡∏Ñ‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤ (Latch)

üîπ **SET:** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏∞ ON ‡∏Ñ‡πâ‡∏≤‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ ‡πÅ‡∏°‡πâ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì input ‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ
üîπ **RST:** ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ö‡∏¥‡∏ï‡∏ó‡∏µ‡πà ON ‡∏≠‡∏¢‡∏π‡πà ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô OFF

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Ladder:**
X0      Y0
|--[ ]--(SET)--|  <-- ‡∏Å‡∏î X0 ‡πÅ‡∏•‡πâ‡∏ß Y0 ‡∏ï‡∏¥‡∏î‡∏Ñ‡πâ‡∏≤‡∏á

X1      Y0
|--[ ]--(RST)--|  <-- ‡∏Å‡∏î X1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á‡∏î‡∏±‡∏ö Y0`
    },
    {
      keywords: ['timer', 'ton', 't0', '‡πÄ‡∏ß‡∏•‡∏≤'],
      response: `üìå **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Timer (‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤)**
‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏ä‡πâ **TON (Timer On Delay)** ‡∏Ñ‡∏∑‡∏≠‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á

**Mitsubishi (FX/Q Series):**
|--[ X0 ]-------( T0 K50 )--|
*(‡πÄ‡∏°‡∏∑‡πà‡∏≠ X0 ‡∏ï‡∏¥‡∏î‡∏ô‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ, Contact T0 ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô)*
*K50 = 5.0 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (Base 100ms)*

**Siemens (S7-1200):**
‡πÉ‡∏ä‡πâ‡∏ö‡∏•‡πá‡∏≠‡∏Å TON ‡πÇ‡∏î‡∏¢‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏≤ PT (Preset Time) ‡πÄ‡∏õ‡πá‡∏ô T#5s`
    },
    {
      keywords: ['counter', 'cnt', 'c0', '‡∏ô‡∏±‡∏ö'],
      response: `üìå **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Counter (‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö)**
‡πÉ‡∏ä‡πâ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì Input

**Mitsubishi:**
|--[ X0 ]-------( C0 K10 )--|
*(‡πÄ‡∏°‡∏∑‡πà‡∏≠ X0 on/off ‡∏Ñ‡∏£‡∏ö 10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á, Contact C0 ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô)*
‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á RST C0 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô 0

**Siemens:**
‡πÉ‡∏ä‡πâ‡∏ö‡∏•‡πá‡∏≠‡∏Å CTU (Count Up) ‡∏Ç‡∏≤ PV ‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö`
    },
    {
      keywords: ['mov', 'move', '‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'],
      response: `üìå **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á MOV (Move Data)**
‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏¢‡πâ‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á

**‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö:** [MOV  S  D]
S = Source (‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á)
D = Destination (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
|--[ M8000 ]----[ MOV K10 D0 ]--|
*(‡∏¢‡πâ‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà 10 ‡πÑ‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Data Register D0)*`
    },
    {
      keywords: ['plsy', 'pulse', 'servo', 'stepper'],
      response: `üìå **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á PLSY (Pulse Output)**
‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏±‡∏ö Servo ‡∏´‡∏£‡∏∑‡∏≠ Stepper Motor (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ PLC ‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏£‡∏≤‡∏ô‡∏ã‡∏¥‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå)

**‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö:** [PLSY  S1  S2  D]
S1 = ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà (Hz)
S2 = ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡∏±‡∏•‡∏™‡πå (0 = ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î)
D = ‡∏Ç‡∏≤ Output (‡πÄ‡∏ä‡πà‡∏ô Y0)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
[PLSY K1000 K5000 Y0]
*‡∏à‡πà‡∏≤‡∏¢‡∏û‡∏±‡∏•‡∏™‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà 1kHz ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 5000 ‡∏û‡∏±‡∏•‡∏™‡πå ‡∏≠‡∏≠‡∏Å‡∏ó‡∏µ‡πà Y0*`
    },
    {
      keywords: ['mitsubishi', 'fx', 'q series'],
      response: `üè≠ **Mitsubishi PLC Basics**
- **Input:** X (X0, X1...)
- **Output:** Y (Y0, Y1...)
- **Internal Relay:** M (M0, M1...)
- **Data Register:** D (D0, D100...)
- **Timer:** T (T0...)
- **Counter:** C (C0...)

‡∏ô‡∏¥‡∏¢‡∏°‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö Ladder ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÅ‡∏û‡∏£‡πà‡∏´‡∏•‡∏≤‡∏¢‡πÉ‡∏ô‡πÑ‡∏ó‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö`
    },
    {
      keywords: ['siemens', 's7', 'tia portal'],
      response: `üè≠ **Siemens PLC Basics**
- **Input:** I (I0.0, I0.1...)
- **Output:** Q (Q0.0, Q0.1...)
- **Memory:** M (M0.0...) ‡∏´‡∏£‡∏∑‡∏≠ Data Block (DB)
- **Timer:** IEC Timer (TON, TOF)

‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö Function Block (FB/FC) ‡πÅ‡∏•‡∏∞ Structure Text (ST) ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô`
    }
  ];

  // Logic ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö (Fuzzy Match ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢)
  const getBotResponse = (text) => {
    const lowerText = text.toLowerCase();
    
    // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ß‡πà‡∏≤‡∏°‡∏µ Keyword ‡πÑ‡∏´‡∏ô‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Input ‡∏ö‡πâ‡∏≤‡∏á
    const match = knowledgeBase.find(item => 
      item.keywords.some(keyword => lowerText.includes(keyword))
    );

    if (match) return match.response;

    // Default Response ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Keyword ‡πÉ‡∏î‡πÜ
    return `‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå‡∏ú‡∏°‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô üòÖ
    
‡∏•‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤:
üëâ **LD** (‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Load)
üëâ **Timer** (‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤)
üëâ **Counter** (‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö)
üëâ **SET** (‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞)
üëâ **MOV** (‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)

‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ú‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡∏Ñ‡∏£‡∏±‡∏ö!`;
  };

  const handleSend = async (e) => {
    e.preventDefault();
    if (!input.trim()) return;

    const userText = input;
    setInput('');
    setMessages(prev => [...prev, { role: 'user', content: userText }]);
    
    // ‡∏à‡∏≥‡∏•‡∏≠‡∏á Delay ‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á
    setIsTyping(true);
    setTimeout(() => {
      const response = getBotResponse(userText);
      setMessages(prev => [...prev, { role: 'assistant', content: response }]);
      setIsTyping(false);
    }, 600); 
  };

  const quickTags = ["LD ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£", "‡∏™‡∏≠‡∏ô‡πÉ‡∏ä‡πâ Timer", "SET ‡∏Å‡∏±‡∏ö RST", "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á MOV", "Pulse Output"];

  return (
    <div className="flex flex-col h-screen bg-slate-100 font-sans text-slate-800">
      {/* Header */}
      <header className="bg-slate-800 text-white p-4 shadow-md flex items-center justify-between">
        <div className="flex items-center gap-3">
          <div className="bg-green-500/20 p-2 rounded-lg backdrop-blur-md border border-green-500/50">
            <Database size={24} className="text-green-400" />
          </div>
          <div>
            <h1 className="font-bold text-lg leading-none">PLC Guru (Offline)</h1>
            <div className="flex items-center gap-1.5 mt-1">
              <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
              <span className="text-[10px] text-green-300 uppercase tracking-wider font-medium">Internal Database Ready</span>
            </div>
          </div>
        </div>
        <button onClick={() => setMessages([messages[0]])} className="p-2 hover:bg-white/10 rounded-full transition-colors">
          <RefreshCw size={20} />
        </button>
      </header>

      {/* Chat Area */}
      <main className="flex-1 overflow-y-auto p-4 space-y-4">
        {messages.map((msg, idx) => (
          <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
            <div className={`flex gap-3 max-w-[90%] ${msg.role === 'user' ? 'flex-row-reverse' : 'flex-row'}`}>
              <div className={`w-9 h-9 rounded-full flex items-center justify-center shrink-0 shadow-sm ${
                msg.role === 'user' ? 'bg-blue-600' : 'bg-white'
              }`}>
                {msg.role === 'user' ? <User size={18} className="text-white" /> : <Bot size={18} className="text-green-600" />}
              </div>
              <div className={`p-3.5 rounded-2xl shadow-sm text-sm leading-relaxed whitespace-pre-wrap ${
                msg.role === 'user' 
                  ? 'bg-blue-600 text-white rounded-tr-none' 
                  : 'bg-white text-slate-700 rounded-tl-none border border-slate-200'
              }`}>
                {msg.content}
              </div>
            </div>
          </div>
        ))}
        
        {isTyping && (
          <div className="flex items-center gap-2 ml-12 text-slate-400 text-xs">
            <span className="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"></span>
            <span className="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-75"></span>
            <span className="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-150"></span>
            ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
          </div>
        )}
        <div ref={messagesEndRef} />
      </main>

      {/* Input Area */}
      <footer className="p-4 bg-white border-t border-slate-200">
        <div className="flex gap-2 overflow-x-auto pb-3 no-scrollbar">
          {quickTags.map(tag => (
            <button 
              key={tag}
              onClick={() => setInput(tag)}
              className="px-3 py-1.5 bg-slate-50 border border-slate-200 rounded-full text-xs text-slate-600 hover:bg-green-50 hover:text-green-700 hover:border-green-200 transition-colors whitespace-nowrap"
            >
              {tag}
            </button>
          ))}
        </div>
        
        <form onSubmit={handleSend} className="flex gap-2 relative">
          <input
            type="text"
            value={input}
            onChange={(e) => setInput(e.target.value)}
            placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."
            className="flex-1 bg-slate-100 border-none rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-green-500 outline-none"
          />
          <button 
            type="submit" 
            disabled={!input.trim()}
            className="bg-slate-800 text-white p-3 rounded-xl hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
          >
            <Send size={20} />
          </button>
        </form>
        <div className="flex justify-center mt-2">
            <p className="text-[10px] text-slate-400 flex items-center gap-1">
                <WifiOff size={10} /> Offline Mode: ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ API Key
            </p>
        </div>
      </footer>
      
      <style>{`
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `}</style>
    </div>
  );
};

export default App;

